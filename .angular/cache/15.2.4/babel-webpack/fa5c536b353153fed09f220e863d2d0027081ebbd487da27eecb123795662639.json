{"ast":null,"code":"import { TableOfContents } from './tableOfContents';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../services/reload.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../header/header.component\";\nimport * as i5 from \"../reload/reload.component\";\nconst _c0 = [\"scrollContainer\"];\nfunction CpiComponent_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 22);\n    i0.ɵɵlistener(\"click\", function CpiComponent_li_13_Template_a_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const section_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.onClick(section_r2[0]));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"uppercase\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const section_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, section_r2[1]), \"\");\n  }\n}\nexport let CpiComponent = /*#__PURE__*/(() => {\n  class CpiComponent {\n    constructor(renderer, viewportScroller, reloadService, router) {\n      this.renderer = renderer;\n      this.viewportScroller = viewportScroller;\n      this.reloadService = reloadService;\n      this.router = router;\n      this.tableOfContents = TableOfContents;\n    }\n    ngOnInit() {\n      console.log(\"--------------------------------------\");\n      console.log(this.router.url);\n      this.loadScript('./assets/prism.js', 'js');\n      window.onload = () => {\n        this.loadScript('./assets/main.js', 'js');\n      };\n    }\n    loadScript(scriptUrl, Tipo) {\n      if (Tipo == 'js') {\n        const script = document.createElement('script');\n        script.type = 'text/javascript';\n        script.src = scriptUrl;\n        document.body.appendChild(script);\n      } else if (Tipo === 'css') {\n        const link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        link.href = scriptUrl;\n        document.head.appendChild(link);\n      }\n    }\n    onClick(elementId) {\n      const container = this.scrollContainer.nativeElement;\n      const elementToScrollTo = document.getElementById(elementId);\n      if (elementToScrollTo) {\n        const scrollPosition = elementToScrollTo.offsetTop;\n        this.renderer.setProperty(container, 'scrollTop', scrollPosition);\n      }\n    }\n  }\n  CpiComponent.ɵfac = function CpiComponent_Factory(t) {\n    return new (t || CpiComponent)(i0.ɵɵdirectiveInject(i0.Renderer2), i0.ɵɵdirectiveInject(i1.ViewportScroller), i0.ɵɵdirectiveInject(i2.ReloadService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  CpiComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CpiComponent,\n    selectors: [[\"app-cpi\"]],\n    viewQuery: function CpiComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.scrollContainer = _t.first);\n      }\n    },\n    decls: 242,\n    vars: 23,\n    consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"http-equiv\", \"X-UA-Compatible\", \"content\", \"IE=edge\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"global\"], [1, \"tableOfContents\"], [4, \"ngFor\", \"ngForOf\"], [1, \"content\"], [\"scrollContainer\", \"\"], [\"id\", \"section1\"], [\"href\", \"https://en.wikipedia.org/wiki/Consumer_price_index\"], [\"id\", \"section2\"], [1, \"container\"], [1, \"code-wrapper\"], [\"code\", \"\", \"id\", \"code\", 1, \"language-python\"], [\"id\", \"copy-button\"], [\"id\", \"section3\"], [\"id\", \"section4\"], [2, \"text-align\", \"center\"], [\"id\", \"section5\"], [\"id\", \"section6\"], [\"id\", \"section7\"], [3, \"click\"]],\n    template: function CpiComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2)(4, \"meta\", 3);\n        i0.ɵɵelementStart(5, \"title\");\n        i0.ɵɵtext(6, \"Document\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(7, \"body\");\n        i0.ɵɵelement(8, \"app-header\");\n        i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 5);\n        i0.ɵɵelement(11, \"app-reload\");\n        i0.ɵɵelementStart(12, \"ul\");\n        i0.ɵɵtemplate(13, CpiComponent_li_13_Template, 4, 3, \"li\", 6);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(14, \"div\", 7, 8)(16, \"div\", 9)(17, \"h2\");\n        i0.ɵɵtext(18, \"Introduction\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"p\");\n        i0.ɵɵtext(20, \" The Consumer Price Index (CPI) is a price index, the price of a weighted average market basket of consumer goods and services purchased by households. Changes in measured CPI track changes in prices over time \");\n        i0.ɵɵelementStart(21, \"a\", 10);\n        i0.ɵɵtext(22, \"See more\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(23, \". Now we goint to see how to calculate this index. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(24, \"p\");\n        i0.ɵɵtext(25, \" We use the Consumer price index manual. So, before to start with formulas and code we need some concepts about the Consumer Price I ndex:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"ol\")(27, \"li\");\n        i0.ɵɵtext(28, \" All products needed to calculate the CPI are called \");\n        i0.ɵɵelementStart(29, \"b\");\n        i0.ɵɵtext(30, \"articles\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(31, \", the articles are grouped into \");\n        i0.ɵɵelementStart(32, \"b\");\n        i0.ɵɵtext(33, \"basic expenses\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(34, \", the basic expanses into \");\n        i0.ɵɵelementStart(35, \"b\");\n        i0.ɵɵtext(36, \"subgroups\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(37, \", the subgroups into \");\n        i0.ɵɵelementStart(38, \"b\");\n        i0.ɵɵtext(39, \"groups\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(40, \", the groups into \");\n        i0.ɵɵelementStart(41, \"b\");\n        i0.ɵɵtext(42, \"clusters\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(43, \" and the clusters into \");\n        i0.ɵɵelementStart(44, \"b\");\n        i0.ɵɵtext(45, \"divisions\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(46, \". This are the six \");\n        i0.ɵɵelementStart(47, \"b\");\n        i0.ɵɵtext(48, \"categories\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(49, \". \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"li\");\n        i0.ɵɵtext(51, \" Each product/article has price (\\\\$) and quantity (g) in the time t (month). The price and weight is obtained from markets, supermarkets and stores (sources). \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"li\");\n        i0.ɵɵtext(53);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(54, \"p\");\n        i0.ɵɵtext(55, \"To calculate the article category indices we use the geometric mean, and to pass fron article category indices to upper category indices we use the a weighted arithmetic mean. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(56, \"p\");\n        i0.ɵɵtext(57, \"In this practice we calculate the CPI of a country divided into eight regions and each region has a database. All databses has the same tables. Therefore, we calculate the CPI in each region and then the overall CPI. \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(58, \"div\", 11)(59, \"h2\");\n        i0.ɵɵtext(60, \"Database Connection\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"p\");\n        i0.ɵɵtext(62, \"First create a class in python called CPI with the next attributes\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(63, \"div\", 12)(64, \"div\", 13)(65, \"pre\");\n        i0.ɵɵtext(66, \"                            \");\n        i0.ɵɵelementStart(67, \"code\", 14);\n        i0.ɵɵtext(68, \"   \\n                                def __init__(self,server : str,user : str,pas : str) -> None:\\n                                    self.codes = {'Art': [],'Gba': [],'Sub': [],'Gru': [],'Agr': [],'Div': []}\\n                                    self.lencodes = {'Art': 9,'Gba': 7,'Sub': 5,'Gru': 4,'Agr': 3,'Div': 2}\\n                                    self.periods : pd.DataFrame\\n                                    self.catwei = {'Art': [],'Gba': [],'Sub': [],'Gru': [],'Agr': [],'Div': []}\\n                                    self.regwei : pd.DataFrame\\n                                    self.di = {'Art':6,'Gba':5,'Sub':4,'Gru':3,'Agr':2,'Div':1}\\n                                    self.variations : pd.DataFrame \\n                                    self.indcat : pd.DataFrame\\n                                    self.indant : pd.DataFrame\\n                                    self.server = server\\n                                    self.user = user \\n                                    self.pas = pas\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(69, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(70, \"button\", 15);\n        i0.ɵɵtext(71, \" Copy \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(72, \"p\");\n        i0.ɵɵtext(73, \"To get the data, first use credentials to establish connection to database\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(74, \"div\", 12)(75, \"div\", 13)(76, \"pre\");\n        i0.ɵɵtext(77, \"                            \");\n        i0.ɵɵelementStart(78, \"code\", 14);\n        i0.ɵɵtext(79, \"   \\n                            def conectar(self, database : str) -> sqlalchemy.engine.Engine:                    \\n                                try:\\n                                    #Drivers: ODBC Driver 17 for SQL Server/SQL Server Native Client 11.0\\n                                    driver = 'ODBC Driver 17 for SQL Server'\\n                                    database_connection = f'mssql://{self.user}:{self.pas}@{self.server}/{database}?driver={driver}'\\n                                    engine = create_engine(database_connection)\\n                                    connection = engine.connect()\\n                                    return connection\\n                                except:\\n                                    print('Connection failed!')                 \\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(80, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(81, \"button\", 15);\n        i0.ɵɵtext(82, \" Copy \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(83, \"div\", 16)(84, \"h2\");\n        i0.ɵɵtext(85, \"Essential Functions\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(86, \"p\");\n        i0.ɵɵtext(87, \" In this section it is presented basic functions (queries to get periodicity, weights and codes) needed to pass from one category to other, especially to pass from articles category to next category.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(88, \"p\");\n        i0.ɵɵtext(89, \"With this method is posible get codes of elements from one category specifying it with 'cod'\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(90, \"div\", 12)(91, \"div\", 13)(92, \"pre\");\n        i0.ɵɵtext(93, \"                            \");\n        i0.ɵɵelementStart(94, \"code\", 14);\n        i0.ɵɵtext(95, \"   \\n                            def Codes(self, cod : str) -> None:\\n        \\n                                query = f\\\"SELECT DISTINCT {cod}Cod FROM DB1.dbo.CODES{self.di[cod]}\\\"\\n                                        idx = cod+'Cod' \\n                                self.codes[cod] = pd.read_sql(query, self.connect('master'), idx)\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(96, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(97, \"button\", 15);\n        i0.ɵɵtext(98, \" Copy \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(99, \"p\");\n        i0.ɵɵtext(100, \"Just articles category has periodicity attribute, this periodicity is different in each region, so is important especify the number region. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(101, \"div\", 12)(102, \"div\", 13)(103, \"pre\");\n        i0.ɵɵtext(104, \"                            \");\n        i0.ɵɵelementStart(105, \"code\", 14);\n        i0.ɵɵtext(106, \"   \\n                            def Periods(self, region : int) -> None:\\n        \\n                                query = f\\\"SELECT ArtCod, ArtPRC FROM DB{region}.dbo.ARTICLES ORDER BY ArtCod\\\"\\n                                idx = 'ArtCod'\\n                                self.periods = pd.read_sql(query, self.connect('master'), index_col=idx)\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(107, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(108, \"button\", 15);\n        i0.ɵɵtext(109, \" Copy \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(110, \"p\");\n        i0.ɵɵtext(111, \"In the same way that query the codes is posible query the category weights.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(112, \"div\", 12)(113, \"div\", 13)(114, \"pre\");\n        i0.ɵɵtext(115, \"                            \");\n        i0.ɵɵelementStart(116, \"code\", 14);\n        i0.ɵɵtext(117, \"   \\n                            def CatWei(self, cod : str) -> None:        \\n                                query = f'SELECT a.{cod}Cod, a.{cod}Pon as \\\"R1\\\", b.{cod}Pon as \\\"R2\\\", c.{cod}Pon as \\\"R3\\\", d.{cod}Pon as \\\"R4\\\", e.{cod}Pon as \\\"R5\\\", f.{cod}Pon as \\\"R6\\\", g.{cod}Pon as \\\"R7\\\", h.{cod}Pon as \\\"R8\\\"\\\\\\n                                        FROM  DB1.dbo.WEIGHTS{self.di[cod} a\\\\\\n                                        INNER JOIN DB2.dbo.WEIGHTS{self.di[cod]} b ON a.{cod}Cod = b.{cod}Cod\\\\\\n                                        INNER JOIN DB3.dbo.WEIGHTS{self.di[cod]} c ON a.{cod}Cod = c.{cod}Cod\\\\\\n                                        INNER JOIN DB4.dbo.WEIGHTS{self.di[cod]} d ON a.{cod}Cod = d.{cod}Cod\\\\\\n                                        INNER JOIN DB5.dbo.WEIGHTS{self.di[cod]} e ON a.{cod}Cod = e.{cod}Cod\\\\\\n                                        INNER JOIN DB6.dbo.WEIGHTS{self.di[cod]} f ON a.{cod}Cod = f.{cod}Cod\\\\\\n                                        INNER JOIN DB7.dbo.WEIGHTS{self.di[cod]} g ON a.{cod}Cod = g.{cod}Cod\\\\\\n                                        INNER JOIN DB8.dbo.WEIGHTS{self.di[cod]} h ON a.{cod}Cod = h.{cod}Cod\\\\\\n                                        ORDER BY a.{cod}Cod'              \\n                                self.catwei[cod] = pd.read_sql(query, self.connect('master'), index_col=cod+'Cod')\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(118, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(119, \"button\", 15);\n        i0.ɵɵtext(120, \" Copy \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtext(121, \" In the final part, after to calculate the CPI per region, it is necessary make a weighted average to get the general CPI. So, the next method query the region weights. \");\n        i0.ɵɵelementStart(122, \"div\", 12)(123, \"div\", 13)(124, \"pre\");\n        i0.ɵɵtext(125, \"                            \");\n        i0.ɵɵelementStart(126, \"code\", 14);\n        i0.ɵɵtext(127, \"   \\n                            def RegWei(self) -> None:\\n        \\n                                query = f'SELECT a.RegWei, b.RegWei, c.RegWei, d.RegWei, e.RegWei, f.RegWei, g.RegWei, h.RegWei \\\\\\n                                        FROM DB1.dbo.REGINF a \\\\\\n                                        INNER JOIN DB2.dbo.REGINF b ON a.RegCod != b.RegCod\\\\\\n                                        INNER JOIN DB3.dbo.REGINF c ON a.RegCod != c.RegCod\\\\\\n                                        INNER JOIN DB4.dbo.REGINF d ON a.RegCod != d.RegCod\\\\\\n                                        INNER JOIN DB5.dbo.REGINF e ON a.RegCod != e.RegCod\\\\\\n                                        INNER JOIN DB6.dbo.REGINF f ON a.RegCod != f.RegCod\\\\\\n                                        INNER JOIN DB7.dbo.REGINF g ON a.RegCod != g.RegCod\\\\\\n                                        INNER JOIN DB8.dbo.REGINF h ON a.RegCod != h.RegCod'            \\n                                self.regwei = pd.read_sql(query, self.connect('master'))\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(128, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(129, \"button\", 15);\n        i0.ɵɵtext(130, \" Copy \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(131, \"p\");\n        i0.ɵɵtext(132, \"This function join and align the category indices of all regions using the its dataframe index (codes).\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(133, \"div\", 12)(134, \"div\", 13)(135, \"pre\");\n        i0.ɵɵtext(136, \"                            \");\n        i0.ɵɵelementStart(137, \"code\", 14);\n        i0.ɵɵtext(138, \"   \\n                            def joinAndAlign(self, df1 : pd.DataFrame, df2 : pd.DataFrame):\\n                                df1 = df1.merge(df2, how='outer', left_index=True, right_index=True,)\\n                                return df1    \\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(139, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(140, \"button\", 15);\n        i0.ɵɵtext(141, \" Copy \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(142, \"div\", 17)(143, \"h2\");\n        i0.ɵɵtext(144, \"Variations\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(145, \"p\");\n        i0.ɵɵtext(146);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(147, \"p\", 18);\n        i0.ɵɵtext(148);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(149, \"ol\")(150, \"li\");\n        i0.ɵɵtext(151, \" Variations with \");\n        i0.ɵɵelementStart(152, \"b\");\n        i0.ɵɵtext(153, \"change reference\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(154);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(155, \"li\");\n        i0.ɵɵtext(156);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(157, \"div\", 12)(158, \"div\", 13)(159, \"pre\");\n        i0.ɵɵtext(160, \"                            \");\n        i0.ɵɵelementStart(161, \"code\", 14);\n        i0.ɵɵtext(162, \"   \\n                            def Variations(self, year : int, month : int, region : int) -> None:\\n        \\n                                query = f\\\"SELECT ArtCod, PrePri,CurPri,PreQua,CurQua,ArtCR FROM DB{region}.dbo.PRICES\\\\\\n                                    WHERE YEAR = {year} AND MONTH = {month} \\\\\\n                                    ORDER BY ArtCod\\\"\\n                                temp = pd.read_sql(query, self.connect('master'), index_col='ArtCod')\\n                                temp['Variation'] = (temp['CurPri']*temp['PreQua'])/(temp['PrePri']*temp['CurQua'])\\n                                temp.loc[temp['ArtCR'] == 'S', 'Variation'] = 1.0\\n                                self.variations = temp['Variation'].replace([np.nan,np.inf],1.0).to_frame()\\n                              \\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(163, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(164, \"button\", 15);\n        i0.ɵɵtext(165, \" Copy \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(166, \"div\", 19)(167, \"h2\");\n        i0.ɵɵtext(168, \" F. Variations \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(169, \"p\");\n        i0.ɵɵtext(170, \"The index of one article is called flexible variation. The flexible variation of one article is:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(171, \"p\", 18);\n        i0.ɵɵtext(172);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(173, \"p\");\n        i0.ɵɵtext(174);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(175, \"div\", 12)(176, \"div\", 13)(177, \"pre\");\n        i0.ɵɵtext(178, \"                            \");\n        i0.ɵɵelementStart(179, \"code\", 14);\n        i0.ɵɵtext(180, \"   \\n                            def VarFlex(self) -> None:     \\n\\n                                groupBy = self.variations.groupby(self.variations.index)     \\n                                df = pd.DataFrame(columns=['ArtInd'], index=groupBy.groups.keys())\\n                                self.periods['ArtPRC'] = self.periods['ArtPRC'].astype(float)\\n                                for index in self.codes['Art'].index:\\n                                    period = self.periods.loc[index][0] \\n                                    try:\\n                                        arreglo = groupBy.get_group(index)['Variation']\\n                                        df.loc[index]['ArtInd'] = sp.gmean(arreglo)**(1/period)\\n                                    except KeyError:\\n                                        pass\\n                                self.indcat = df \\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(181, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(182, \"button\", 15);\n        i0.ɵɵtext(183, \" Copy \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(184, \"div\", 20)(185, \"h2\");\n        i0.ɵɵtext(186, \"Category Indices\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(187, \"p\");\n        i0.ɵɵtext(188, \"The indices of the next category can be calculate using:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(189, \"p\", 18);\n        i0.ɵɵtext(190);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(191, \"p\");\n        i0.ɵɵtext(192);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(193, \"p\", 18);\n        i0.ɵɵtext(194);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(195, \"p\");\n        i0.ɵɵtext(196, \"So, in this instance, the below method calculate the relative.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(197, \"div\", 12)(198, \"div\", 13)(199, \"pre\");\n        i0.ɵɵtext(200, \"                            \");\n        i0.ɵɵelementStart(201, \"code\", 14);\n        i0.ɵɵtext(202, \" \\n                            def IndCat(self, codInf : str, codSup : str, region : int) -> None:  \\n\\n                                union = self.indcat.merge(self.catwei[codInf]['R'+str(region)], how='inner', left_index=True, right_index=True,)        \\n                                groupBy = union.groupby(union.index.str[:self.lencodes[codSup]]).apply(lambda x: (x[codInf+'Ind']*(x['R'+str(region)]/x['R'+str(region)].sum())).sum())\\n                                df = pd.DataFrame(columns=[codSup+'Ind'], index=self.codes[codSup].index)\\n                                df.loc[groupBy.index,codSup+'Ind'] = groupBy\\n                                self.indcat = df\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(203, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(204, \"button\", 15);\n        i0.ɵɵtext(205, \" Copy \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(206, \"p\");\n        i0.ɵɵtext(207);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(208, \"div\", 12)(209, \"div\", 13)(210, \"pre\");\n        i0.ɵɵtext(211, \"                            \");\n        i0.ɵɵelementStart(212, \"code\", 14);\n        i0.ɵɵtext(213, \" \\n                            def IndAnt(self, year : int, month : int, cod : str) -> None:\\n\\n                                query = f'SELECT a.{cod}Cod, a.{cod}Ind, b.{cod}Ind, c.{cod}Ind, d.{cod}Ind, e{cod}Ind, f.{cod}Ind, g{cod}Ind, h.{cod}Ind \\\\\\n                                    FROM (SELECT {cod}Cod, {cod}Ind FROM DB1.dbo.INDICES{self.di[cod]} \\\\\\n                                    WHERE YEAR = {year} AND MONTH = {month}) a \\\\\\n                                    FULL OUTER JOIN (SELECT {cod}Cod, {cod}Ind FROM DB2.dbo.INDICES{self.di[cod]} \\\\\\n                                    WHERE YEAR = {year} AND MONTH = {month}) b ON a.{cod{Cod = b.{cod}Cod\\\\\\n                                    FULL OUTER JOIN (SELECT {cod}Cod, {cod}Ind FROM DB3.dbo.INDICES{self.di[cod]} \\\\\\n                                    WHERE YEAR = {year} AND MONTH = {month}) c ON a.{cod}Cod = c.{cod}Cod\\\\\\n                                    FULL OUTER JOIN (SELECT {cod}Cod, {cod}Ind FROM DB4.dbo.INDICES{self.di[cod]} WHERE YEAR = {year} AND MONTH = {month}) d ON a.{cod}Cod = d.{cod}Cod\\\\\\n                                    FULL OUTER JOIN (SELECT {cod}Cod, {cod}Ind FROM DB5.dbo.INDICES{self.di[cod]} WHERE YEAR = {year} AND MONTH = {month}) e ON a.{cod}Cod = e.{cod}Cod\\\\\\n                                    FULL OUTER JOIN (SELECT {cod}Cod, {cod}Ind FROM DB6.dbo.INDICES{self.di[cod]} WHERE YEAR = {year} AND MONTH = {month}) f ON a.{cod}Cod = f.{cod}Cod\\\\\\n                                    FULL OUTER JOIN (SELECT {cod}Cod, {cod}Ind FROM DB7.dbo.INDICES{self.di[cod]} WHERE YEAR = {year} AND MONTH = {month}) g ON a.{cod}Cod = g.{cod}Cod\\\\\\n                                    FULL OUTER JOIN (SELECT {cod}Cod, {cod}Ind FROM DB8.dbo.INDICES{self.di[cod]} WHERE YEAR = {year} AND MONTH = {month}) h ON a.{cod}Cod = h.{cod}Cod'\\n                                self.indant = pd.read_sql(query, self.connect('master'), index_col=cod+'Cod')\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(214, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(215, \"button\", 15);\n        i0.ɵɵtext(216, \" Copy \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(217, \"div\", 21)(218, \"h2\");\n        i0.ɵɵtext(219, \"Consumer Price Index\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(220, \"p\");\n        i0.ɵɵtext(221, \"Now there is an object with the capacity to calculate the CPI. The last method is the builder that use all previous methods. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(222, \"div\", 12)(223, \"div\", 13)(224, \"pre\");\n        i0.ɵɵtext(225, \"                            \");\n        i0.ɵɵelementStart(226, \"code\", 14);\n        i0.ɵɵtext(227, \" \\n                            def Builder(self,year : int, month : int) -> None:\\n\\n                                #Ponderaciones de todas las categor\\u00EDas\\n                                self.CatWei('Art')\\n                                self.CatWei('Gba')\\n                                self.CatWei('Div')\\n                                #c\\u00F3digos de todas las categor\\u00EDas\\n                                self.Codes('Art')\\n                                self.Codes('Gba')\\n                                self.Codes('Div')\\n                                #Obtenemos los \\u00EDndices del month anterior\\n                                if month == 1:\\n                                    self.IndAnt(year - 1, 12, 'Gba')\\n                                else:\\n                                    self.IndAnt(year, month - 1, 'Gba')\\n                                for i in range(1,9):     \\n                                    self.Variations(year, month, i)\\n                                    \\n                                    #-------------------------------------------------------------------\\n                                    self.Periods(i)\\n                                    self.VarFlex()\\n                                    self.IndCat('Art','Gba', i)\\n                                    if i == 1:\\n                                        df = self.indcat.copy()\\n                                    else:\\n                                        df = self.joinAndAlign(df, self.indcat.copy())\\n                                indact = np.multiply(df,self.indant).replace(np.nan,0.0)\\n                                idiv = indact.groupby(indact.index.str[:self.lencodes['Div']]).sum()\\n                                #continuar con las ponderaciones, pero dentro del ciclo\\n                                cpiR = np.multiply(idiv, self.catwei['Div']).sum()/100\\n                                print(round(np.dot(cpiR,self.regwei.loc[0])/100,4))\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(228, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(229, \"button\", 15);\n        i0.ɵɵtext(230, \" Copy \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(231, \"p\");\n        i0.ɵɵtext(232, \"Finally create an instance of CPI, this takes credentials from console, called \\\"temp\\\" and execute builder method.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(233, \"div\", 12)(234, \"div\", 13)(235, \"pre\");\n        i0.ɵɵtext(236, \"                            \");\n        i0.ɵɵelementStart(237, \"code\", 14);\n        i0.ɵɵtext(238, \" \\n                            temp = CPI(sys.argv[1],sys.argv[2], sys.argv[3])\\n                            temp.Builder(int(sys.argv[4]),int(sys.argv[5]))\\n                            \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(239, \"\\n                        \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(240, \"button\", 15);\n        i0.ɵɵtext(241, \" Copy \");\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngForOf\", ctx.tableOfContents);\n        i0.ɵɵadvance(40);\n        i0.ɵɵtextInterpolate1(\" All articles have periodicity, for example, one article has periodicity \", \"$6$\", \" if the information about its price it's present in january and july. \");\n        i0.ɵɵadvance(93);\n        i0.ɵɵtextInterpolate3(\"The variation of an article for \", \"$a$\", \" in the current period \", \"$t$\", \", current month, for the source \", \"$s$\", \" is:\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate(\"$V_{s,a,t} =\\\\frac{P_t Q_{t-1}}{P_{t-1} Q_t}$\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵtextInterpolate2(\" \", \"ArtCR $=$ 'SI'\", \" must be replaced by \", \"$1,0$\", \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" Variations whose value is undefined must be replaced by \", \"$1,0$\", \" \");\n        i0.ɵɵadvance(16);\n        i0.ɵɵtextInterpolate(\"$V_a = \\\\prod_{s=1}^n V_{s,a,t}$ raised to the $\\\\frac{1}{nm}$ power.\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate6(\" where \", \"$m$\", \" is periodicity of the article, \", \"$n$\", \" the number of sources and \", \"$V_{s,a,t}$\", \" is the variation of the article \", \"$a$\", \" for the source \", \"$s$\", \" in the current month \", \"$i$\", \". \");\n        i0.ɵɵadvance(16);\n        i0.ɵɵtextInterpolate1(\" \", \"$ R_{GB} = \\\\vec{\\\\alpha} \\\\cdot \\\\vec{V} $\", \" \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate4(\" where \", \"$\\\\vec{\\\\alpha}$\", \" is the weight vector, \", \"$\\\\vec{V}$\", \" is the vector of indices and \", \"$ R_{GB}$\", \" the relative index. To get the true index is necessary multiply by \", \"$I_{GB}(t-1)$\", \", the corresponding index of the previous month: \");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", \"$I_{GB}(t)= R_{GB} \\\\times I_{GB}(t-1)$\", \" \");\n        i0.ɵɵadvance(13);\n        i0.ɵɵtextInterpolate1(\"And this method query the index in the month \", \"$t-1$\", \"\");\n      }\n    },\n    dependencies: [i1.NgForOf, i4.HeaderComponent, i5.ReloadComponent, i1.UpperCasePipe],\n    styles: [\"code[class*=language-][_ngcontent-%COMP%], pre[class*=language-][_ngcontent-%COMP%]{color:#f8f8f2;background:#000108;text-shadow:none;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;hyphens:none}code[class*=language-][_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-selection, code[class*=language-][_ngcontent-%COMP%]   [_ngcontent-%COMP%]::selection, pre[class*=language-][_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-moz-selection, pre[class*=language-][_ngcontent-%COMP%]   [_ngcontent-%COMP%]::selection{text-shadow:none;background:#000108}@media print{code[class*=language-][_ngcontent-%COMP%], pre[class*=language-][_ngcontent-%COMP%]{text-shadow:none}}pre[class*=language-][_ngcontent-%COMP%]{padding:1em;margin:.5em 0;overflow:auto}[_ngcontent-%COMP%]:not(pre) > code[class*=language-][_ngcontent-%COMP%], pre[class*=language-][_ngcontent-%COMP%]{background:#000108}[_ngcontent-%COMP%]:not(pre) > code[class*=language-][_ngcontent-%COMP%]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata[_ngcontent-%COMP%], .token.comment[_ngcontent-%COMP%], .token.doctype[_ngcontent-%COMP%], .token.prolog[_ngcontent-%COMP%]{color:#6272a4}.token.punctuation[_ngcontent-%COMP%]{color:#f8f8f2}.token.namespace[_ngcontent-%COMP%]{opacity:.7}.token.boolean[_ngcontent-%COMP%], .token.constant[_ngcontent-%COMP%], .token.deleted[_ngcontent-%COMP%], .token.number[_ngcontent-%COMP%], .token.property[_ngcontent-%COMP%], .token.symbol[_ngcontent-%COMP%], .token.tag[_ngcontent-%COMP%]{color:#ff79c6}.token.attr-name[_ngcontent-%COMP%], .token.builtin[_ngcontent-%COMP%], .token.char[_ngcontent-%COMP%], .token.inserted[_ngcontent-%COMP%], .token.selector[_ngcontent-%COMP%], .token.string[_ngcontent-%COMP%]{color:#f1fa8c}.language-css[_ngcontent-%COMP%]   .token.string[_ngcontent-%COMP%], .style[_ngcontent-%COMP%]   .token.string[_ngcontent-%COMP%], .token.entity[_ngcontent-%COMP%], .token.operator[_ngcontent-%COMP%], .token.url[_ngcontent-%COMP%]{color:#50fa7b;background:#000108}.token.atrule[_ngcontent-%COMP%], .token.attr-value[_ngcontent-%COMP%], .token.keyword[_ngcontent-%COMP%]{color:#8be9fd}.token.class-name[_ngcontent-%COMP%], .token.function[_ngcontent-%COMP%]{color:#ffb86c}.token.important[_ngcontent-%COMP%], .token.regex[_ngcontent-%COMP%], .token.variable[_ngcontent-%COMP%]{color:#bd93f9}.token.bold[_ngcontent-%COMP%], .token.important[_ngcontent-%COMP%]{font-weight:700}.token.italic[_ngcontent-%COMP%]{font-style:italic}.token.entity[_ngcontent-%COMP%]{cursor:help}\", \"html[_ngcontent-%COMP%]{scroll-behavior:smooth}.global[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:90vh;background-color:#000;position:relative}.tableOfContents[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;color:#fff;margin-top:5%;margin-bottom:5%;align-items:center}.tableOfContents[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#000;background-color:#fff;font-size:22px;border-radius:11px;text-align:left}.content[_ngcontent-%COMP%]{padding:2.1%;flex:3.5;border-style:groove;border-color:gray;border-top-right-radius:20px;border-bottom-right-radius:20px;background-color:#fff;overflow-y:scroll}ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}li[_ngcontent-%COMP%]{margin-top:40px}a[_ngcontent-%COMP%]{text-decoration:none;color:gray}a[_ngcontent-%COMP%]:hover{-webkit-text-decoration:solid;text-decoration:solid}a[href^=\\\"#\\\"][_ngcontent-%COMP%]{transition-duration:10000s}#section1[_ngcontent-%COMP%], #section2[_ngcontent-%COMP%], #section3[_ngcontent-%COMP%], #section4[_ngcontent-%COMP%], #section5[_ngcontent-%COMP%], #section6[_ngcontent-%COMP%], #section7[_ngcontent-%COMP%], #section8[_ngcontent-%COMP%]{padding:20px;margin-bottom:20px}.container[_ngcontent-%COMP%]{width:90%;height:100%;overflow:auto;border-radius:12px;margin-left:10%}[language-python^=\\\"[_ngcontent-%COMP%]{{ }}\\\"][_ngcontent-%COMP%]{display:none}.code-wrapper[_ngcontent-%COMP%]{position:relative}#copy-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;padding:7px;background-color:#2d2d2d;outline:none;color:#fff;border-radius:8px;cursor:pointer;transition:all .2s ease-in;opacity:0;border:1px solid antiquewhite}#copy-button.show-msg[_ngcontent-%COMP%]{display:none}#copy-button[_ngcontent-%COMP%]:hover{background-color:#423e3e}.code-wrapper[_ngcontent-%COMP%]:hover   #copy-button[_ngcontent-%COMP%]{opacity:1}p[_ngcontent-%COMP%]{text-indent:2em}\"]\n  });\n  return CpiComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}