{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../header/header.component\";\nimport * as i2 from \"../table-of-contents/table-of-contents.component\";\nexport class ElasticDockerComponent {\n  constructor() {\n    this.tableOfContents = [['section1', 'Introduction'], ['section2', 'Docker compose file'], ['section3', 'Connection'], ['section4', 'Indices and snapshots'], ['section5', 'Restore indices from snapshots']];\n  }\n  ngOnInit() {\n    this.loadScript('./assets/prism.js', 'js');\n    window.onload = () => {\n      this.loadScript('./assets/main.js', 'js');\n    };\n  }\n  loadScript(scriptUrl, Tipo) {\n    if (Tipo == 'js') {\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = scriptUrl;\n      document.body.appendChild(script);\n    } else if (Tipo === 'css') {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.type = 'text/css';\n      link.href = scriptUrl;\n      document.head.appendChild(link);\n    }\n  }\n  scrollToSection(elementId) {\n    const elementToScrollTo = document.getElementById(elementId);\n    if (elementToScrollTo) {\n      elementToScrollTo.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }\n}\nElasticDockerComponent.ɵfac = function ElasticDockerComponent_Factory(t) {\n  return new (t || ElasticDockerComponent)();\n};\nElasticDockerComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ElasticDockerComponent,\n  selectors: [[\"app-elastic-docker\"]],\n  decls: 82,\n  vars: 1,\n  consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"http-equiv\", \"X-UA-Compatible\", \"content\", \"IE=edge\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [1, \"global\"], [1, \"toc\"], [3, \"tableOfContents\", \"scrollToElement\"], [1, \"content\"], [\"id\", \"section1\"], [\"id\", \"section2\"], [1, \"container\"], [1, \"code-wrapper\"], [\"code\", \"\", \"id\", \"code\", 1, \"language-python\"], [\"id\", \"copy-button\"], [\"id\", \"section3\"], [\"src\", \"./assets/images/elasticdocker/pastetoken.png\", \"alt\", \"\", 2, \"display\", \"block\", \"margin-left\", \"auto\", \"margin-right\", \"auto\"], [\"src\", \"./assets/images/elasticdocker/codeverification.png\", \"alt\", \"\", 2, \"display\", \"block\", \"margin-left\", \"auto\", \"margin-right\", \"auto\"], [\"id\", \"section4\"], [\"id\", \"section5\"]],\n  template: function ElasticDockerComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n      i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2)(4, \"meta\", 3);\n      i0.ɵɵelementStart(5, \"title\");\n      i0.ɵɵtext(6, \"Document\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"body\");\n      i0.ɵɵelement(8, \"app-header\");\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 5)(11, \"app-table-of-contents\", 6);\n      i0.ɵɵlistener(\"scrollToElement\", function ElasticDockerComponent_Template_app_table_of_contents_scrollToElement_11_listener($event) {\n        return ctx.scrollToSection($event);\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"div\", 7)(13, \"div\", 8)(14, \"h2\");\n      i0.ɵɵtext(15, \"Introduction\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"p\");\n      i0.ɵɵtext(17, \" This time we going to create a ElasticSeach (ES) instance using docker, learn how to push our data in ES indices and how to make snapshots (backups) in a local binding folder. Finally we'll restore the example indices in another ES instance. \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(18, \"div\", 9)(19, \"h2\");\n      i0.ɵɵtext(20, \"Docker compose file\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"p\");\n      i0.ɵɵtext(22, \"The first thing to do is create the instance copy and paste the code below into a yaml file callled 'docker-compose.yaml', or '.yml'.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"div\", 10)(24, \"div\", 11)(25, \"pre\");\n      i0.ɵɵtext(26, \"                            \");\n      i0.ɵɵelementStart(27, \"code\", 12);\n      i0.ɵɵtext(28, \"   \\n                                                version: '3.9'\\n                                                services:\\n                                                    es01:\\n                                                        container_name: es01\\n                                                        image: docker.elastic.co/elasticsearch/elasticsearch:8.8.2\\n                                                        environment: \\n                                                            - discovery.type=single-node\\n                                                            - path.repo=/usr/share/elasticsearch/backups\\n                                                        restart: always\\n                                                        ports:\\n                                                            - 9200:9200\\n                                                        networks:\\n                                                            - elastic\\n                                                        volumes:\\n                                                            - es_data:/usr/share/elasticsearch/data\\n                                                            - ./backups:/usr/share/elasticsearch/backups\\n\\n                                                        kibana:\\n                                                            container_name: kibana\\n                                                            image: docker.elastic.co/kibana/kibana:8.8.2\\n                                                            restart: always\\n                                                            ports:\\n                                                                - 5601:5601\\n                                                            networks:\\n                                                                - elastic\\n\\n                                                volumes:\\n                                                    es_data:\\n                                                networks:\\n                                                    elastic:\\n                            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(29, \"\\n                        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"button\", 13);\n      i0.ɵɵtext(31, \" Copy \");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(32, \"div\", 14)(33, \"h2\");\n      i0.ɵɵtext(34, \"Connection\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(35, \"p\");\n      i0.ɵɵtext(36, \" The connection will be with python using the library elasticsearch, the '7.13.4' version works fine. We can install it in our python environment: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"div\", 10)(38, \"div\", 11)(39, \"pre\");\n      i0.ɵɵtext(40, \"                            \");\n      i0.ɵɵelementStart(41, \"code\", 12);\n      i0.ɵɵtext(42, \"   \\n                                pip install elasticsearch==7.13.4   \\n                            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(43, \"\\n                        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(44, \"button\", 13);\n      i0.ɵɵtext(45, \" Copy \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtext(46, \" Before the connection, we need the token, password and api key. In your terminal, for the token run: \");\n      i0.ɵɵelementStart(47, \"div\", 10)(48, \"div\", 11)(49, \"pre\");\n      i0.ɵɵtext(50, \"                            \");\n      i0.ɵɵelementStart(51, \"code\", 12);\n      i0.ɵɵtext(52, \"   \\n                                sudo docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana\\n                            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(53, \"\\n                        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"button\", 13);\n      i0.ɵɵtext(55, \" Copy \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtext(56, \" and for the password: \");\n      i0.ɵɵelementStart(57, \"div\", 10)(58, \"div\", 11)(59, \"pre\");\n      i0.ɵɵtext(60, \"                            \");\n      i0.ɵɵelementStart(61, \"code\", 12);\n      i0.ɵɵtext(62, \"   \\n                                sudo docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic\\n                            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(63, \"\\n                        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(64, \"button\", 13);\n      i0.ɵɵtext(65, \" Copy \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtext(66, \" then enter 'y' in the terminal. \");\n      i0.ɵɵelement(67, \"br\");\n      i0.ɵɵelementStart(68, \"p\");\n      i0.ɵɵtext(69, \" Now, in the 'localhost:5601' we can paste the required token. Kibana gives a verification code of 6 digits and we can get from terminal keyboarding 'docker logs kibana' . After that, login with your password and user 'elastic' \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(70, \"img\", 15)(71, \"img\", 16);\n      i0.ɵɵelementStart(72, \"p\");\n      i0.ɵɵtext(73, \" Once in the kibana interface, find the endpoint 'http://localhost:5601/app/management/security/api_keys/', create api key, gives a name and copy as json\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(74, \"div\", 17)(75, \"h2\");\n      i0.ɵɵtext(76, \"Indices and snapshots\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(77, \"p\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(78, \"div\", 18)(79, \"h2\");\n      i0.ɵɵtext(80, \"Restore indices from snapshots\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(81, \"p\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"tableOfContents\", ctx.tableOfContents);\n    }\n  },\n  dependencies: [i1.HeaderComponent, i2.TableOfContentsComponent],\n  styles: [\".global[_ngcontent-%COMP%] {\\n        display: flex;\\n        flex-direction: row;\\n        width: 100%;\\n        height: 90vh;\\n        background-color: black;\\n        position: relative;\\n}\\n\\n.toc[_ngcontent-%COMP%] {\\n        display: flex;\\n        flex: 1.1;\\n}\\n\\n.content[_ngcontent-%COMP%] {\\n        padding: 2.1%;\\n        flex: 3.5;\\n        border-style: groove;\\n        border-color: grey;\\n        border-top-right-radius: 20px;\\n        border-bottom-right-radius: 20px;\\n        background-color: white;\\n        overflow-y: scroll;\\n}\\n\\nul[_ngcontent-%COMP%] {\\n        list-style: none;\\n        padding: 0;\\n        margin: 0;\\n}\\n\\nli[_ngcontent-%COMP%] {\\n        margin-top: 8%;\\n}\\n\\na[_ngcontent-%COMP%] {\\n        text-decoration: none;\\n        color: gray;\\n}\\n\\na[_ngcontent-%COMP%]:hover {\\n        -webkit-text-decoration: solid;\\n                text-decoration: solid;\\n}\\n\\na[href^=\\\"#\\\"][_ngcontent-%COMP%] {\\n        transition-duration: 10000s;\\n        \\n}\\n\\n#section1[_ngcontent-%COMP%], #section2[_ngcontent-%COMP%], #section3[_ngcontent-%COMP%], #section4[_ngcontent-%COMP%], #section5[_ngcontent-%COMP%], #section6[_ngcontent-%COMP%], #section7[_ngcontent-%COMP%], #section8[_ngcontent-%COMP%] {\\n        padding: 20px;\\n        margin-bottom: 20px;\\n}\\n\\n\\n.container[_ngcontent-%COMP%] {\\n        width: 90%;\\n        height: 100%;\\n        overflow: auto;\\n        border-radius: 12px;\\n        margin-left: 10%;\\n}\\n\\n[language-python^=\\\"[_ngcontent-%COMP%]{{ }}\\\"][_ngcontent-%COMP%] {\\n        display: none;\\n}\\n\\n.code-wrapper[_ngcontent-%COMP%] {\\n        position: relative;\\n\\n}\\n\\n#copy-button[_ngcontent-%COMP%] {\\n        position: absolute;\\n        top: 8px;\\n        right: 8px;\\n        padding: 7px;\\n        background-color: #2d2d2d;\\n        outline: none;\\n        color: white;\\n        border-radius: 8px;\\n        cursor: pointer;\\n        transition: all 0.2s ease-in;\\n        opacity: 0;\\n        border: 1px solid antiquewhite;\\n}\\n\\n#copy-button.show-msg[_ngcontent-%COMP%] {\\n        display: none;\\n\\n}\\n\\n#copy-button[_ngcontent-%COMP%]:hover {\\n        background-color: #423e3e;\\n}\\n\\n.code-wrapper[_ngcontent-%COMP%]:hover   #copy-button[_ngcontent-%COMP%] {\\n        opacity: 1;\\n}\\n\\n\\n\\np[_ngcontent-%COMP%] {\\n        text-indent: 2em;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9lbGFzdGljLWRvY2tlci9lbGFzdGljLWRvY2tlci5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO1FBQ1EsYUFBYTtRQUNiLG1CQUFtQjtRQUNuQixXQUFXO1FBQ1gsWUFBWTtRQUNaLHVCQUF1QjtRQUN2QixrQkFBa0I7QUFDMUI7O0FBRUE7UUFDUSxhQUFhO1FBQ2IsU0FBUztBQUNqQjs7QUFFQTtRQUNRLGFBQWE7UUFDYixTQUFTO1FBQ1Qsb0JBQW9CO1FBQ3BCLGtCQUFrQjtRQUNsQiw2QkFBNkI7UUFDN0IsZ0NBQWdDO1FBQ2hDLHVCQUF1QjtRQUN2QixrQkFBa0I7QUFDMUI7O0FBRUE7UUFDUSxnQkFBZ0I7UUFDaEIsVUFBVTtRQUNWLFNBQVM7QUFDakI7O0FBRUE7UUFDUSxjQUFjO0FBQ3RCOztBQUVBO1FBQ1EscUJBQXFCO1FBQ3JCLFdBQVc7QUFDbkI7O0FBRUE7UUFDUSw4QkFBc0I7Z0JBQXRCLHNCQUFzQjtBQUM5Qjs7QUFFQTtRQUNRLDJCQUEyQjtRQUMzQiw4Q0FBOEM7QUFDdEQ7O0FBRUE7Ozs7Ozs7O1FBUVEsYUFBYTtRQUNiLG1CQUFtQjtBQUMzQjs7O0FBR0E7UUFDUSxVQUFVO1FBQ1YsWUFBWTtRQUNaLGNBQWM7UUFDZCxtQkFBbUI7UUFDbkIsZ0JBQWdCO0FBQ3hCOztBQUVBO1FBQ1EsYUFBYTtBQUNyQjs7QUFFQTtRQUNRLGtCQUFrQjs7QUFFMUI7O0FBRUE7UUFDUSxrQkFBa0I7UUFDbEIsUUFBUTtRQUNSLFVBQVU7UUFDVixZQUFZO1FBQ1oseUJBQXlCO1FBQ3pCLGFBQWE7UUFDYixZQUFZO1FBQ1osa0JBQWtCO1FBQ2xCLGVBQWU7UUFDZiw0QkFBNEI7UUFDNUIsVUFBVTtRQUNWLDhCQUE4QjtBQUN0Qzs7QUFFQTtRQUNRLGFBQWE7O0FBRXJCOztBQUVBO1FBQ1EseUJBQXlCO0FBQ2pDOztBQUVBO1FBQ1EsVUFBVTtBQUNsQjs7OztBQUlBO1FBQ1EsZ0JBQWdCO0FBQ3hCIiwic291cmNlc0NvbnRlbnQiOlsiLmdsb2JhbCB7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBoZWlnaHQ6IDkwdmg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IGJsYWNrO1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbi50b2Mge1xuICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICBmbGV4OiAxLjE7XG59XG5cbi5jb250ZW50IHtcbiAgICAgICAgcGFkZGluZzogMi4xJTtcbiAgICAgICAgZmxleDogMy41O1xuICAgICAgICBib3JkZXItc3R5bGU6IGdyb292ZTtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiBncmV5O1xuICAgICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogMjBweDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6IDIwcHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICAgICAgICBvdmVyZmxvdy15OiBzY3JvbGw7XG59XG5cbnVsIHtcbiAgICAgICAgbGlzdC1zdHlsZTogbm9uZTtcbiAgICAgICAgcGFkZGluZzogMDtcbiAgICAgICAgbWFyZ2luOiAwO1xufVxuXG5saSB7XG4gICAgICAgIG1hcmdpbi10b3A6IDglO1xufVxuXG5hIHtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICBjb2xvcjogZ3JheTtcbn1cblxuYTpob3ZlciB7XG4gICAgICAgIHRleHQtZGVjb3JhdGlvbjogc29saWQ7XG59XG5cbmFbaHJlZl49XCIjXCJdIHtcbiAgICAgICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMTAwMDBzO1xuICAgICAgICAvKiBDaGFuZ2UgdGhpcyB0byBhZGp1c3QgdGhlIGFuaW1hdGlvbiBzcGVlZCAqL1xufVxuXG4jc2VjdGlvbjEsXG4jc2VjdGlvbjIsXG4jc2VjdGlvbjMsXG4jc2VjdGlvbjQsXG4jc2VjdGlvbjUsXG4jc2VjdGlvbjYsXG4jc2VjdGlvbjcsXG4jc2VjdGlvbjgge1xuICAgICAgICBwYWRkaW5nOiAyMHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuXG5cbi5jb250YWluZXIge1xuICAgICAgICB3aWR0aDogOTAlO1xuICAgICAgICBoZWlnaHQ6IDEwMCU7XG4gICAgICAgIG92ZXJmbG93OiBhdXRvO1xuICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4O1xuICAgICAgICBtYXJnaW4tbGVmdDogMTAlO1xufVxuXG5bbGFuZ3VhZ2UtcHl0aG9uXj1cInt7IH19XCJdIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbn1cblxuLmNvZGUtd3JhcHBlciB7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcblxufVxuXG4jY29weS1idXR0b24ge1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogOHB4O1xuICAgICAgICByaWdodDogOHB4O1xuICAgICAgICBwYWRkaW5nOiA3cHg7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyZDJkMmQ7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4O1xuICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2UtaW47XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIGFudGlxdWV3aGl0ZTtcbn1cblxuI2NvcHktYnV0dG9uLnNob3ctbXNnIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcblxufVxuXG4jY29weS1idXR0b246aG92ZXIge1xuICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDIzZTNlO1xufVxuXG4uY29kZS13cmFwcGVyOmhvdmVyICNjb3B5LWJ1dHRvbiB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG59XG5cblxuXG5wIHtcbiAgICAgICAgdGV4dC1pbmRlbnQ6IDJlbTtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["ElasticDockerComponent","constructor","ngOnInit","loadScript","window","onload","scriptUrl","Tipo","script","document","createElement","type","src","body","appendChild","link","rel","href","head","scrollToSection","elementId","elementToScrollTo","getElementById","scrollIntoView","behavior","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/home/lmdc/Documents/WebPage/src/app/components/elastic-docker/elastic-docker.component.ts","/home/lmdc/Documents/WebPage/src/app/components/elastic-docker/elastic-docker.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-elastic-docker',\n  templateUrl: './elastic-docker.component.html',\n  styleUrls: ['./elastic-docker.component.css']\n})\nexport class ElasticDockerComponent {\n\n  tableOfContents: Array<string>[]= [\n    ['section1','Introduction'],\n    ['section2','Docker compose file'],\n    ['section3','Connection'],\n    ['section4','Indices and snapshots'],\n    ['section5','Restore indices from snapshots']\n  ];\n\n\n  ngOnInit() {      \n    this.loadScript('./assets/prism.js', 'js');\n    window.onload = () => {\n      this.loadScript('./assets/main.js', 'js');\n    };\n  }\n\n  loadScript(scriptUrl: string,Tipo: string) {\n    if (Tipo=='js'){\n      const script = document.createElement('script');\n      script.type = 'text/javascript';\n      script.src = scriptUrl;\n      document.body.appendChild(script);\n    }  else if (Tipo === 'css') {\n      const link = document.createElement('link');\n      link.rel='stylesheet'\n      link.type = 'text/css';\n      link.href = scriptUrl;\n      document.head.appendChild(link);\n    }   \n  }\n\n  scrollToSection(elementId: string): void {\n    const elementToScrollTo = document.getElementById(elementId);\n    if (elementToScrollTo) {\n      elementToScrollTo.scrollIntoView({ behavior: 'smooth' });\n    }\n  }\n\n}\n","<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n\n    <title>Document</title>\n</head>\n\n<body>\n\n    <app-header></app-header>\n\n    <div class=\"global\">\n        <div class=\"toc\">\n            <app-table-of-contents [tableOfContents]=\"tableOfContents\"\n                (scrollToElement)=\"scrollToSection($event)\"></app-table-of-contents>\n        </div>\n\n        <div class=\"content\">\n            <div id=\"section1\">\n                <h2>Introduction</h2>\n                <p>\n                    This time we going to create a ElasticSeach (ES) instance using docker, learn\n                    how to push our data\n                    in ES indices and how to make snapshots (backups) in a local binding folder.\n                    Finally we'll restore the example indices\n                    in another ES instance.\n                </p>\n            </div>\n            <div id=\"section2\">\n                <h2>Docker compose file</h2>\n                <p>The first thing to do is create the instance copy and paste the code below into a\n                    yaml file callled 'docker-compose.yaml', or '.yml'.</p>\n                <div class=\"container\">\n                    <div class=\"code-wrapper\">\n                        <pre>\n                            <code code id=\"code\" class=\"language-python\">   \n                                                version: '3.9'\n                                                services:\n                                                    es01:\n                                                        container_name: es01\n                                                        image: docker.elastic.co/elasticsearch/elasticsearch:8.8.2\n                                                        environment: \n                                                            - discovery.type=single-node\n                                                            - path.repo=/usr/share/elasticsearch/backups\n                                                        restart: always\n                                                        ports:\n                                                            - 9200:9200\n                                                        networks:\n                                                            - elastic\n                                                        volumes:\n                                                            - es_data:/usr/share/elasticsearch/data\n                                                            - ./backups:/usr/share/elasticsearch/backups\n\n                                                        kibana:\n                                                            container_name: kibana\n                                                            image: docker.elastic.co/kibana/kibana:8.8.2\n                                                            restart: always\n                                                            ports:\n                                                                - 5601:5601\n                                                            networks:\n                                                                - elastic\n\n                                                volumes:\n                                                    es_data:\n                                                networks:\n                                                    elastic:\n                            </code>\n                        </pre>\n                        <button id=\"copy-button\">\n                            Copy\n                        </button>\n                    </div>\n                </div>\n            </div>\n            <div id=\"section3\">\n                <h2>Connection</h2>\n                <p>\n                    The connection will be with python using the library elasticsearch, the '7.13.4' version works fine. We can install it in our \n                    python environment:\n                </p>\n                <div class=\"container\">\n                    <div class=\"code-wrapper\">\n                        <pre>\n                            <code code id=\"code\" class=\"language-python\">   \n                                pip install elasticsearch==7.13.4   \n                            </code>\n                        </pre>\n                        <button id=\"copy-button\">\n                            Copy\n                        </button>\n                    </div>\n                </div>\n                Before the connection, we need the token, password and api key. In your terminal, for the token run:\n                <div class=\"container\">\n                    <div class=\"code-wrapper\">\n                        <pre>\n                            <code code id=\"code\" class=\"language-python\">   \n                                sudo docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-create-enrollment-token -s kibana\n                            </code>\n                        </pre>\n                        <button id=\"copy-button\">\n                            Copy\n                        </button>\n                    </div>                    \n                </div>\n                and for the password:\n                <div class=\"container\">\n                    <div class=\"code-wrapper\">\n                        <pre>\n                            <code code id=\"code\" class=\"language-python\">   \n                                sudo docker exec -it es01 /usr/share/elasticsearch/bin/elasticsearch-reset-password -u elastic\n                            </code>\n                        </pre>\n                        <button id=\"copy-button\">                        \n                            Copy\n                        </button>\n                    </div>                    \n                </div>\n                then enter 'y' in the terminal.\n                <br>\n                <p>\n                    Now, in the 'localhost:5601' we can paste the required token. Kibana gives a verification code of 6 digits and we can get from terminal keyboarding 'docker logs kibana' . After that, login with your password and\n                    user 'elastic'\n                </p>                \n                <img src=\"./assets/images/elasticdocker/pastetoken.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" alt=\"\">\n                <img src=\"./assets/images/elasticdocker/codeverification.png\" style=\"display: block; margin-left: auto; margin-right: auto;\" alt=\"\">\n\n                <p> Once in the kibana interface, find the endpoint 'http://localhost:5601/app/management/security/api_keys/', create api key, gives a name and copy as json</p>\n                \n            </div>\n\n\n            <div id=\"section4\">\n                <h2>Indices and snapshots</h2>\n                <p>\n\n\n\n\n                </p>\n            </div>\n            <div id=\"section5\">\n                <h2>Restore indices from snapshots</h2>\n                <p>\n\n\n\n\n                </p>\n            </div>\n        </div>\n\n    </div>\n\n</body>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}